\doxysection{include/departamentos.h File Reference}
\hypertarget{departamentos_8h}{}\label{departamentos_8h}\index{include/departamentos.h@{include/departamentos.h}}


Header com as estruturas e protótipos do módulo de gestão de departamentos.  


\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_departamento}{Departamento}}
\item 
struct \mbox{\hyperlink{struct_departamentos}{Departamentos}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{departamentos_8h_ab8548fadb8d9a52fc87e68711abb38f7}\label{departamentos_8h_ab8548fadb8d9a52fc87e68711abb38f7} 
enum {\bfseries Atividade} \{ {\bfseries ATIVO} = 1
, {\bfseries INATIVO}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{departamentos_8h_a70d5d164f1af89dbfc2ddf612b40fce0}{criar\+Departamento}} (\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}departamentos)
\begin{DoxyCompactList}\small\item\em Cria um novo departamento. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{departamentos_8h_af03d69a7b122157c0a4c374fe2689afb}{listar\+\_\+departamentos}} (\mbox{\hyperlink{struct_departamentos}{Departamentos}} departamentos)
\begin{DoxyCompactList}\small\item\em Lista os departamentos registados. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{departamentos_8h_ac57e7a6999568640f91e130d6dd3dfa7}{atualizar\+\_\+departamento}} (\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}departamentos)
\begin{DoxyCompactList}\small\item\em Atualiza os dados de um departamento existente. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{departamentos_8h_a1a66bed9f2e57f55b7e57f7721833751}{inativar\+\_\+\+Departamento}} (\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}departamentos)
\begin{DoxyCompactList}\small\item\em Inativa um departamento (não remove do array, apenas marca como INATIVO). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{departamentos_8h_a821d301f5845e36de1a217e6391d70cf}{guardar\+Departamentos}} (\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}departamentos)
\begin{DoxyCompactList}\small\item\em Guarda os departamentos num ficheiro binário. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{departamentos_8h_a33e2f8cb30ba4947f37d42f559ddc03c}{carregar\+Departamentos}} (\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}departamentos)
\begin{DoxyCompactList}\small\item\em Carrega os departamentos a partir de um ficheiro binário. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{departamentos_8h_a748226cfeab27eb714a84125372b10e3}{obter\+Maior\+IDDepartamento}} (\mbox{\hyperlink{struct_departamentos}{Departamentos}} departamentos)
\begin{DoxyCompactList}\small\item\em Obtém o maior ID existente na lista de departamentos. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Header com as estruturas e protótipos do módulo de gestão de departamentos. 

\begin{DoxyAuthor}{Author}
Francisco Alves 
\end{DoxyAuthor}


\label{doc-func-members}
\Hypertarget{departamentos_8h_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{departamentos_8h_ac57e7a6999568640f91e130d6dd3dfa7}\index{departamentos.h@{departamentos.h}!atualizar\_departamento@{atualizar\_departamento}}
\index{atualizar\_departamento@{atualizar\_departamento}!departamentos.h@{departamentos.h}}
\doxysubsubsection{\texorpdfstring{atualizar\_departamento()}{atualizar\_departamento()}}
{\footnotesize\ttfamily \label{departamentos_8h_ac57e7a6999568640f91e130d6dd3dfa7} 
void atualizar\+\_\+departamento (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}}]{departamentos}{}\end{DoxyParamCaption})}



Atualiza os dados de um departamento existente. 


\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura com a lista de departamentos.\\
\hline
\end{DoxyParams}
Atualiza os dados de um departamento existente.

A função usa procura o ID do departamento e oferece opções para alterar o nome do departamento, nome do responsável do departamento ou o contacto associado ao departamento. 
\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura que contém a lista de departamentos. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Ao atualizar campos de texto, a função utiliza ler\+String\+Dinamica, obter\+Email ou obter\+Numero\+Telemovel, que alocam nova memória na Heap. 
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
Ao atualizar os campos deve se certificar que se liberta a memoria anterior da heap para evitar erros de memory leak. 
\end{DoxyWarning}
\Hypertarget{departamentos_8h_a33e2f8cb30ba4947f37d42f559ddc03c}\index{departamentos.h@{departamentos.h}!carregarDepartamentos@{carregarDepartamentos}}
\index{carregarDepartamentos@{carregarDepartamentos}!departamentos.h@{departamentos.h}}
\doxysubsubsection{\texorpdfstring{carregarDepartamentos()}{carregarDepartamentos()}}
{\footnotesize\ttfamily \label{departamentos_8h_a33e2f8cb30ba4947f37d42f559ddc03c} 
void carregar\+Departamentos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}}]{departamentos}{}\end{DoxyParamCaption})}



Carrega os departamentos a partir de um ficheiro binário. 


\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura com a lista de departamentos.\\
\hline
\end{DoxyParams}
Carrega os departamentos a partir de um ficheiro binário.

Lê o contador de registos e aloca, ajusta a capacidade e aloca o array principal na heap (para evitar memory leaks), reconstroi as strings dinâmicas (nome, responsável, contacto) utilizando a função ler\+String\+Binário(). 
\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura onde os dados lidos serão carregados. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Se o ficheiro não existir (Por exemplo numa primeira utilização do programa), a função termina silenciosamente. 
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
A função usa várias alocações de memória dinâmica (malloc), pelo que é essencial que a memória seja libertada no final. 
\end{DoxyWarning}
\Hypertarget{departamentos_8h_a70d5d164f1af89dbfc2ddf612b40fce0}\index{departamentos.h@{departamentos.h}!criarDepartamento@{criarDepartamento}}
\index{criarDepartamento@{criarDepartamento}!departamentos.h@{departamentos.h}}
\doxysubsubsection{\texorpdfstring{criarDepartamento()}{criarDepartamento()}}
{\footnotesize\ttfamily \label{departamentos_8h_a70d5d164f1af89dbfc2ddf612b40fce0} 
void criar\+Departamento (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}}]{departamentos}{}\end{DoxyParamCaption})}



Cria um novo departamento. 


\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura com a lista de departamentos.\\
\hline
\end{DoxyParams}
Cria um novo departamento.

Aloca memória dinâmica para o nome, responsável e contacto usando ler\+String\+Dinamica. Incrementa os contadores de departamentos totais e ativos. 
\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a lista onde o departamento está inserido. \\
\hline
\end{DoxyParams}
\Hypertarget{departamentos_8h_a821d301f5845e36de1a217e6391d70cf}\index{departamentos.h@{departamentos.h}!guardarDepartamentos@{guardarDepartamentos}}
\index{guardarDepartamentos@{guardarDepartamentos}!departamentos.h@{departamentos.h}}
\doxysubsubsection{\texorpdfstring{guardarDepartamentos()}{guardarDepartamentos()}}
{\footnotesize\ttfamily \label{departamentos_8h_a821d301f5845e36de1a217e6391d70cf} 
void guardar\+Departamentos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}}]{departamentos}{}\end{DoxyParamCaption})}



Guarda os departamentos num ficheiro binário. 


\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura com a lista de departamentos.\\
\hline
\end{DoxyParams}
Guarda os departamentos num ficheiro binário.

Serializa a estrutura para o disco, gravando primeiro o contador total e, em seguida, os dados de cada departamento. Utiliza \doxylink{input_8h_a383f1e5a8c2a346c8292f72bbd7c5350}{escrever\+String\+Binario()} para lidar com os campos de texto dinâmicos. 
\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura que contém os dados a persistir. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Implementa um formato de armazenamento híbrido\+: utiliza campos de tamanho fixo para metadados (ID e estado) e delega a escrita de campos de tamanho variável à função auxiliar \doxylink{input_8h_a383f1e5a8c2a346c8292f72bbd7c5350}{escrever\+String\+Binario()}. 
\end{DoxyNote}
\Hypertarget{departamentos_8h_a1a66bed9f2e57f55b7e57f7721833751}\index{departamentos.h@{departamentos.h}!inativar\_Departamento@{inativar\_Departamento}}
\index{inativar\_Departamento@{inativar\_Departamento}!departamentos.h@{departamentos.h}}
\doxysubsubsection{\texorpdfstring{inativar\_Departamento()}{inativar\_Departamento()}}
{\footnotesize\ttfamily \label{departamentos_8h_a1a66bed9f2e57f55b7e57f7721833751} 
void inativar\+\_\+\+Departamento (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_departamentos}{Departamentos}} \texorpdfstring{$\ast$}{*}}]{departamentos}{}\end{DoxyParamCaption})}



Inativa um departamento (não remove do array, apenas marca como INATIVO). 


\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura com a lista de departamentos.\\
\hline
\end{DoxyParams}
Inativa um departamento (não remove do array, apenas marca como INATIVO).

A função muda o estado do departamento para inativo para que ele não seja eliminado permanentemente do sistema, permitindo que ele permaneça no histórico do programa. A função utiliza validações para validar o ID do departamento, e para verificar que o mesmo já não está inativo. 
\begin{DoxyParams}{Parameters}
{\em departamentos} & Apontador para a estrutura que contém a lista de departamentos. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
A função decrementa o contador \textquotesingle{} departamentos\+Ativos \textquotesingle{} se for bem sucedida. 
\end{DoxyNote}
\Hypertarget{departamentos_8h_af03d69a7b122157c0a4c374fe2689afb}\index{departamentos.h@{departamentos.h}!listar\_departamentos@{listar\_departamentos}}
\index{listar\_departamentos@{listar\_departamentos}!departamentos.h@{departamentos.h}}
\doxysubsubsection{\texorpdfstring{listar\_departamentos()}{listar\_departamentos()}}
{\footnotesize\ttfamily \label{departamentos_8h_af03d69a7b122157c0a4c374fe2689afb} 
void listar\+\_\+departamentos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_departamentos}{Departamentos}}}]{departamentos}{}\end{DoxyParamCaption})}



Lista os departamentos registados. 


\begin{DoxyParams}{Parameters}
{\em departamentos} & Estrutura com a lista de departamentos.\\
\hline
\end{DoxyParams}
Lista os departamentos registados.


\begin{DoxyParams}{Parameters}
{\em departamentos} & Estrutura que contém a lista de departamentos. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Utiliza a função \doxylink{departamentos_8c_adbaf34f68076f02c3dc7a033c5c2aa04}{passar\+\_\+int\+\_\+string()} para exibir o estado de forma legível. 
\end{DoxyNote}
\Hypertarget{departamentos_8h_a748226cfeab27eb714a84125372b10e3}\index{departamentos.h@{departamentos.h}!obterMaiorIDDepartamento@{obterMaiorIDDepartamento}}
\index{obterMaiorIDDepartamento@{obterMaiorIDDepartamento}!departamentos.h@{departamentos.h}}
\doxysubsubsection{\texorpdfstring{obterMaiorIDDepartamento()}{obterMaiorIDDepartamento()}}
{\footnotesize\ttfamily \label{departamentos_8h_a748226cfeab27eb714a84125372b10e3} 
int obter\+Maior\+IDDepartamento (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_departamentos}{Departamentos}}}]{departamentos}{}\end{DoxyParamCaption})}



Obtém o maior ID existente na lista de departamentos. 


\begin{DoxyParams}{Parameters}
{\em departamentos} & Estrutura com a lista de departamentos. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retorna o maior ID ou 0 caso não existam departamentos.
\end{DoxyReturn}
Obtém o maior ID existente na lista de departamentos.


\begin{DoxyParams}{Parameters}
{\em departamentos} & Estrutura que contém a lista de departamentos e contador. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retorna o valor do maior ID encontrado, ou 0 se não houverem departamentos. 
\end{DoxyReturn}
